# implementation.md

## üß© Overview

This is a productivity web app that combines **Todo Management** and **Habit Tracking**. It is built using **Next.js 15**, **React (TypeScript)**, **Tailwind CSS**, **Shadcn UI**, and **Lucide React**. The app enables users to manage tasks, track recurring habits, and visualize their progress through analytics.

The system uses **Firebase Authentication** for user login, **Firestore** for cloud database storage, and **Chart.js** for real-time analytics. The app includes **push notifications** for incomplete habits based on their scheduled time.

---

## üöÄ Tech Stack

| Purpose             | Tech                                |
|---------------------|-------------------------------------|
| Frontend Framework  | Next.js 15 + React + TypeScript     |
| Styling             | Tailwind CSS                        |
| UI Components       | Shadcn UI                           |
| Icons               | Lucide React                        |
| Authentication      | Firebase Auth (Email + Google)      |
| Database            | Firebase Firestore                  |
| Analytics           | Chart.js                            |
| Notifications       | Firebase Cloud Messaging (FCM)      |

---

## üìÅ File Structure (High-level)

app/
‚îú‚îÄ page.tsx # Homepage with tabs
‚îú‚îÄ login/page.tsx # Login page (Firebase)
‚îú‚îÄ analytics/page.tsx # Analytics dashboard with charts
‚îú‚îÄ components/
‚îÇ ‚îú‚îÄ TodoForm.tsx
‚îÇ ‚îú‚îÄ HabitForm.tsx
‚îÇ ‚îú‚îÄ TodoItem.tsx
‚îÇ ‚îú‚îÄ HabitItem.tsx
‚îÇ ‚îú‚îÄ AppBar.tsx
‚îÇ ‚îî‚îÄ FloatingButton.tsx
‚îú‚îÄ lib/
‚îÇ ‚îú‚îÄ streakUtils.ts # Habit streak logic
‚îÇ ‚îú‚îÄ firestoreUtils.ts # Firestore helpers
‚îÇ ‚îú‚îÄ notificationUtils.ts # Push notification scheduling
‚îú‚îÄ firebase/
‚îÇ ‚îú‚îÄ firebaseConfig.ts # Firebase initialization
‚îÇ ‚îî‚îÄ messaging.ts # Push notification setup
‚îú‚îÄ types/
‚îÇ ‚îî‚îÄ index.ts # Shared types

---

## ‚úÖ Core Features

### ‚úÖ Todo Management
- Add, edit, delete todo items
- Fields:
  - `title`, `description`, `deadline`, `status: "Todo" | "Done"`, `priority: "Low" | "Medium" | "High"`
- Recurring options:
  - Weekly: `1‚Äì7 times/week`
  - Monthly: once or twice
- Stored in Firestore under the `todo` collection with `userId` reference

---

### ‚úÖ Habit Tracker
- Habits categorized by time of day:
  - `"Morning"`, `"Lunch"`, `"Afternoon"`, `"Evening"`, `"Daily"`
- Fields:
  - `title`, `recurrence: "daily" | "weekly" | "monthly"`, `status`, `streak`, `lastCompletedDate`
- Streak increases on consecutive completions
- Congratulatory modal appears when all daily habits are marked as ‚ÄúDone‚Äù
- Stored in Firestore under the `habit` collection with `userId` reference

---

### ‚úÖ Push Notifications
> Powered by **Firebase Cloud Messaging (FCM)**

#### Habit Reminders:
- **Morning:** Notify at **11:00 AM**
- **Lunch:** Notify at **1:30 PM**
- **Afternoon:** Notify at **4:30 PM**
- **Evening:** Notify at **9:00 PM**
- **Daily:** Notify at **10:00 PM** (2 hrs before midnight)

#### Logic:
- Background job (Firebase Function or client timer) checks for unfinished habits
- Sends notification if any habits remain "Todo" for that time slot

---

### ‚úÖ Analytics Dashboard
> Built with **Chart.js** at `/analytics`

Includes:
- Habit streak charts
- Todo completion trends
- Monthly habit/todo summaries
- Priority distribution graphs

---

### ‚úÖ Authentication
> Managed with **Firebase Authentication**

- Login via Email/Password or Google
- Auth state syncs with Firestore to fetch user-specific todos/habits
- User session stored client-side with Firebase SDK

---

### ‚úÖ UI & Navigation

#### App Bar
- **Left:** Logo + App name (clickable ‚Üí homepage)
- **Right:** Logout button (Firebase sign-out)

#### Homepage
- Tabs: **Todo** | **Habits**
- Floating Action Button (FAB):
  - Shows `TodoForm` or `HabitForm` based on current tab

---

## üóÉÔ∏è Firestore Database Structure

### üîê `users` Collection

#### Document ID
`<userId>` ‚Äî from Firebase Auth

#### Fields
| Field         | Type     | Description                           |
|---------------|----------|---------------------------------------|
| `email`       | string   | User's email address                  |
| `name`        | string   | Display name                          |
| `createdAt`   | timestamp | Date account was created              |
| `avatarUrl`   | string   | Profile picture (optional)            |

---

### ‚úÖ `todo` Collection

#### Document ID
Auto-generated

#### Fields
| Field         | Type                 | Description                                  |
|---------------|----------------------|----------------------------------------------|
| `userId`      | string               | Reference to `users` document ID             |
| `title`       | string               | Task title                                   |
| `description` | string               | Task details                                 |
| `deadline`    | timestamp            | Due date                                     |
| `status`      | `"Todo"` \| `"Done"` | Completion status                            |
| `priority`    | `"Low"` \| `"Medium"` \| `"High"` | Priority                  |
| `recurring`   | object (optional)    | `{ type: "weekly" \| "monthly", times: number }` |
| `createdAt`   | timestamp            | Creation timestamp                           |
| `updatedAt`   | timestamp            | Last updated timestamp                       |

---

### üßò `habit` Collection

#### Document ID
Auto-generated

#### Fields
| Field              | Type                                       | Description                                |
|--------------------|--------------------------------------------|--------------------------------------------|
| `userId`           | string                                     | Reference to `users` document ID           |
| `title`            | string                                     | Habit name                                 |
| `recurrence`       | `"daily"` \| `"weekly"` \| `"monthly"`     | Frequency                                  |
| `timeOfDay`        | `"Morning"` \| `"Lunch"` \| `"Afternoon"` \| `"Evening"` \| `"Daily"` | Time slot |
| `status`           | `"Todo"` \| `"Done"`                       | Status for the current day                 |
| `streak`           | number                                     | Consecutive days of completion             |
| `lastCompletedDate`| timestamp                                  | For checking streak continuity             |
| `createdAt`        | timestamp                                  | When habit was added                       |
| `updatedAt`        | timestamp                                  | Last updated                               |

---

### üîÑ Daily Reset Logic

- At **12:00 AM**, reset all habit `status` to `"Todo"`
- If not done for today, reset `streak` to 0
- Can be implemented using Firebase Cloud Functions (cron job)
